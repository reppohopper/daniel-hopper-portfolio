<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Chess Game — Daniel Hopper</title>
  <meta name="description" content="Chess Game — AI-driven web prototype by Daniel Hopper." />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
  <!-- Central site styles (single canonical CSS for all pages) -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header class="site-header">
    <nav>
      <ul><li><strong>Daniel Hopper</strong></li></ul>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="projects.html" aria-current="page">Projects</a></li>
        <li><a href="resume.html">Resume</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>

    <h1>Chess Game</h1>

    <p><strong>Technology: </strong>JavaScript, PIXI.js (2D JS Graphics Rendering Library)</p>    
    <p><strong>My role: Sole designer and developer</strong></p>
    <p><strong>Description: </strong>A web-based chess prototype which correctly allows all possible legal moves for any board state. <a href="projects.html">Try it out!</a></p>

    <section class="image-grid">
      <figure class="image-grid-item-square">
        <img src="assets/chess-thumb.png"
             alt="A chess queen is highlighted and its set of possible moves are displayed with yellow circles and dots.">
        <figcaption>Highlighting of possible move and attack options.</figcaption>
      </figure>
    
      <figure class="image-grid-item-square">
        <img src="assets/chess-execution-times.png"
             alt="The web tools cosnole shows 0-2ms exectution times after each move, and how moves trigger updates in between 2-8 related pieces.">
        <figcaption>Moves trigger updates in 2-8 affected pieces (rather than all 16), and execution time is kept between 0-3 milliseconds on each move.</figcaption>
      </figure>
    </section>
    
    <h2>Problem & Objectives</h2>
    <p>I needed a way to demonstrate the kind of complex, modular, logic-heavy JavaScript that I was performing at work in proprietatry codebases. In this 2023 project, I created a complete chess engine in JavaScript with a graphical user interface to run in the browser. It was also a chance to deep dive into chess programming logic without referencing any external implementations.</p>
    
    <h2>Technical Implementation</h2>
    <ul>
      <li>Modularity: IIFE-based modules-by-closure, runs anywhere without CommonJS or ESmodules</li>
      <li>Performance: Computes all possible moves in range 0ms-3ms even in complex board states through relational logic.</li>
      <li>Correctly tracks whose turn it is, all check states, and accounts for all chess rules, such as en passant, castling, and pawn promotion. </li>
      <li>Handle obscure accumulating states like en pessant, threefold repetition draw rule, and the 50-move draw rule. </li>
    </ul>
    
    <h2>Key Functionality Code Snippet</h2>
    <p>The following code is just a small section of the <a href="https://github.com/reppohopper/chess_game/blob/main/chess_engine_mbc/king_threat_functions.js" target="_blank" rel="noopener">King Threat Function Module</a>, by which the program checks a variety of conditions after each move to see if the enemy king has fallen into check. Kings are visualized as "spiders" that can be threatened along many separate "strands". </p>
    <p>This code demonstrates a module system implemented with IIFEs, and shows how the possible actions and states of many other piece types need to be considered with each move.  </p>
    <pre class="code-snippet"><code>
      exports.add_to_threat_web_register = function (color_char, id, direction, m) {
        if (
            // If it is an enemy piece ...
            color_char !== id[0]
            && (
                // ... and it's a queen, 
                id[1] === "q" // "q" for queen
                // ... or a bishop on a diagonal, or a rook on a straight ...
                || (direction.length === 2 && id[1] === "b") // "b" for bishop
                || (direction.length === 1 && id[1] === "r") // "r" for rook
            )
        ) {
            // Enter check state. 
            m.meta_data.check_state = color_char; // Idempotent. 
            // Add to the direct threats object, if it isn't there already
            if (!exports.kings[color_char].direct_threats.includes(id)) {
                exports.kings[color_char].direct_threats.push(id);
            }
        }
        // Add to the general register of pieces that will need a callback when 
        // the king-spider moves and thereby moves the whole web. 
        exports.kings[color_char].strand_register[direction] = id;
    }
    </code></pre>
    <p>Full project code is available at the <a href="https://github.com/reppohopper/chess_game/tree/main/chess_engine_mbc" target="_blank" rel="noopener">GitHub repo</a>.</p>

    <h2>Learning Points</h2>
    <p><strong>The importance of going deep to learn something. </strong></p>
    <p>I learned that going deep into something we seem to know well can often expose a world of unexpected complexities. I was surprised to find that even a highly structured and logical rule set that is easily comprehensible by humans can nonetheless be fiendishly difficult to program into a computer. </p>
    <p><strong>The motivating value of working in an area you are passionate about. </strong></p>
    <p>This project taught me that being passionate about and deeply interested in a topic can carry me through a lot of laborious work and difficult obstacles. </p>

    <h2>Potential Enhancements</h2>
    <p>The things I most wanted to do next to elevate the project were...<p>

    <ul>
      <li>Add much clearer messaging around whose turn it is, and states like move, check, and game end. </li>
      <li>Add sounds to assist with this clarity. </li>
      <li>Full move history panel in chess notation. </li>
      <li>Improve the incredibly basic UI to have more balanced and attractive color scheme, and center and flex in the browser. </li>
      <li><strong>Later: </strong>Enable online play by generaitng private URLs for invite-based games. </li>
    </ul>

    <h2>Results and Regrets</h2>
    <p>This was my first project on GitHub and it was a strong learning experience, but not without regret. This project proved to me that I can achieve and ship code that meets difficult objectives and high performance standards as a solo engineer. At the same time, I regret spending so much energy reinventing the wheel, and so I'll focus energy in future coding projects trying to solve novel problems that I can't find ready libraries for on the internet.</p>

    <p><a href="projects.html">&larr; Back to Projects</a></p>
  </main>

  <footer style="max-width:960px;margin:2rem auto 0;color:var(--muted);">
    <small>&copy; <span id="year"></span> Daniel Hopper</small>
  </footer>

  <script src="assets/js/main.js"></script>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>